{"version":3,"sources":["main.js","../components/clearForms.js","../components/sendForm.js","../components/validateForm.js"],"names":["$","phonemaskOk","e","formcheck","padding","maxWidth","slidesToShow","slidesToScroll","infinite","arrows","dots","prevArrow","nextArrow","mobileFirst","responsive","breakpoint","settings","swipe","btn","menu","myDefMenu","animatedAnchorScroll","validateForm","formId"],"mappings":"AAAA;AACA;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AChEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AH/SA;AACA;AACAA;AACA;AACI;AACJ;AACIA;AACI;AAA0BC;AAAkB;AAC5C;AAA4BA;AAAkB;AAC9C;AAAyBA;AAAkB;AAHC;AAWpD;AALID;AACI;AAEIE;AACA;AACA;AACAC;AACH;AACJ;AAML;AAJIH;AACII;AADoB;AAQ5B;AAJIJ;AACII;AADsB;AAQ9B;AAJIJ;AACIK;AADuD;AAQ/D;AAJIL;AACIM;AACAC;AACAC;AACAC;AACAC;AACAC;AAKAC;AAXuB;AAc/B;AAIIZ;AACIM;AACAC;AACAC;AACAC;AACAC;AACAG;AACAF;AAKAC;AAKAE;AAEQC;AACAC;AACIC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AARM;AAFd;AAlBwB;AAoBpC;AAcIjB;AACIM;AACAC;AACAC;AACAC;AACAC;AACAC;AACAC;AAPmB;AAJ3B;AAgBI;AAdJ;AACA;AACA;AACA;AACA;AACA;AAgBI;AACIM;AACAC;AACA;AACA;AAJwB;AAThC;AAgBInB;AACIoB;AACH;AAdL;AAgBIpB;AACIA;AACH;AAdL;AAgBI;AACI;AACAA;AACH;AACDA;AACIqB;AACAD;AACA;AACH;AAdL;AAgBIE;AACIC;AACA;AACA;AACA;AAJS;AATjB;AAgBI;AAdJ;AACA;AAgBC;AAdD;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["/*//=require components/example.js*/\r\n\r\n//=require ../components/**.*\r\n\r\n\r\n$(document).ready(function(){\r\n\r\n    var phonemaskOk = 0;\r\n\r\n    $(\".MaskedPhone\").inputmask(\"8 (999) 999-99-99\",{\r\n        \"oncomplete\": function(){ phonemaskOk = 1; },\r\n        \"onincomplete\": function(){ phonemaskOk = 0; },\r\n        \"oncleared\": function(){ phonemaskOk = 0; }\r\n    });\r\n\r\n    $('input').keypress(function(e){\r\n        if(e.keyCode==13)\r\n        {\r\n            e.preventDefault();\r\n            var qid = $(this).parents('form').attr('alt');\r\n            var qreachgoal = $(this).parents('form').attr('data-reachgoal');\r\n            formcheck(qid, qreachgoal);\r\n        }\r\n    });\r\n\r\n    $(\".FancyBtn\").fancybox({\r\n        padding: 0\r\n    });\r\n\r\n    $(\".FancyMedia\").fancybox({\r\n        padding: 0\r\n    });\r\n\r\n    $(\".ProcessingPersonalDataText-Link, .ImPolitic\").fancybox({\r\n        maxWidth : 700\r\n    });\r\n\r\n    $('.ForThoseSlider').slick({\r\n        slidesToShow: 1,\r\n        slidesToScroll: 1,\r\n        infinite: true,\r\n        arrows: true,\r\n        dots: false,\r\n        prevArrow: '<div class=\"Slider-Arrow Slider-Arrow_prev\">\\n' +\r\n        '                        <img src=\"/img/Slider-Arrow-Icon.png\"\\n' +\r\n        '                             alt=\"\"\\n' +\r\n        '                             class=\"Slider-SlideImg Slider-Arrow-Icon\">\\n' +\r\n        '                    </div>',\r\n        nextArrow: '<div class=\"Slider-Arrow Slider-Arrow_next\">\\n' +\r\n        '                        <img src=\"/img/Slider-Arrow-Icon.png\"\\n' +\r\n        '                             alt=\"\"\\n' +\r\n        '                             class=\"Slider-SlideImg Slider-Arrow-Icon\">\\n' +\r\n        '                    </div>'\r\n    });\r\n\r\n    $('.StarRecommendSlider').slick({\r\n        slidesToShow: 1,\r\n        slidesToScroll: 1,\r\n        infinite: false,\r\n        arrows: true,\r\n        dots: false,\r\n        mobileFirst: true,\r\n        prevArrow: '<div class=\"StarRecommendSlider-Arrow StarRecommendSlider-Arrow_prev\">\\n' +\r\n        '                        <img src=\"/img/Slider-Arrow-Icon.png\"\\n' +\r\n        '                             alt=\"\"\\n' +\r\n        '                             class=\"StarRecommendSlider-SlideImg StarRecommendSlider-Arrow-Icon\">\\n' +\r\n        '                    </div>',\r\n        nextArrow: '<div class=\"StarRecommendSlider-Arrow StarRecommendSlider-Arrow_next\">\\n' +\r\n        '                        <img src=\"/img/Slider-Arrow-Icon.png\"\\n' +\r\n        '                             alt=\"\"\\n' +\r\n        '                             class=\"StarRecommendSlider-SlideImg StarRecommendSlider-Arrow-Icon\">\\n' +\r\n        '                    </div>',\r\n        responsive: [\r\n            {\r\n                breakpoint: 1200,\r\n                settings: {\r\n                    swipe: false,\r\n                    // speed: 500,\r\n                    // fade: true,\r\n                    // cssEase: 'linear'\r\n                    // slidesToShow: 1,\r\n                    // slidesToScroll: 1,\r\n                    // centerMode: true,\r\n                    // variableWidth: true\r\n                }\r\n            },\r\n        ]\r\n    });\r\n\r\n    $('.FormSlider').slick({\r\n        slidesToShow: 1,\r\n        slidesToScroll: 1,\r\n        infinite: false,\r\n        arrows: true,\r\n        dots: false,\r\n        prevArrow: '',\r\n        nextArrow: '<button type=\"button\" class=\"FormSlider-Arrow FormSlider-Next Btn\">' +\r\n        'Продолжить <img src=\"/img/SliderArrow.png\" alt=\"\">' +\r\n        '</button>'\r\n    });\r\n\r\n    /*var myDefMenu = new DefMenu({\r\n        btn : \".DefmenuBtn\"\r\n        //menu : \".mydefmenu\",\r\n        //build : true,\r\n        //links: \"auto\"\r\n    });*/\r\n\r\n    var myDefMenu = new DefMenu({\r\n        btn: \".DefmenuBtn\",\r\n        menu: \".BurgerMenu\"\r\n        //build : true,\r\n        //links: \"auto\"\r\n    });\r\n\r\n    $('.BurgerMenu-Close').on('click', function () {\r\n        myDefMenu.close();\r\n    });\r\n\r\n    $('.Accordion-Title').on('click', function () {\r\n        $(this).parent().toggleClass('Accordion-Item_open');\r\n    });\r\n\r\n    function animatedAnchorScroll(self) {\r\n        var target = $(self).attr('href');\r\n        $('html, body').animate({ scrollTop: $(target).offset().top-80}, 500);\r\n    }\r\n    $('a[href^=\"#\"]').click(function () {\r\n        animatedAnchorScroll(this);\r\n        myDefMenu.close();\r\n        return false;\r\n    });\r\n\r\n    validateForm({\r\n        formId: 'form-need-help'\r\n        //formValidClass: 'Form_valid',\r\n        //formInvalidClass: 'Form_invalid',\r\n        //inputErrorClass: 'Input_error'\r\n    });\r\n\r\n    /*var center = [54.728243, 55.955951];\r\n    var iconCoord = [54.728243, 55.955951];\r\n    mapInit(center, iconCoord);*/\r\n});\r\n\r\n","// function will clear input elements on ever form on HTML page\r\nfunction clearForms() {\r\n    // variable declaration\r\n    var x, y, z, type = null;\r\n    // loop through forms on HTML page\r\n    for (x = 0; x < document.forms.length; x++) {\r\n        // loop through each element on form\r\n        for (y = 0; y < document.forms[x].elements.length; y++) {\r\n            // define element type\r\n            type = document.forms[x].elements[y].type;\r\n            // alert before erasing form element\r\n            //alert('form='+x+' element='+y+' type='+type);\r\n            // switch on element type\r\n            switch (type) {\r\n                case 'text':\r\n                case 'textarea':\r\n                case 'password':\r\n                case 'tel':\r\n                    //case \"hidden\":\r\n                    document.forms[x].elements[y].value = '';\r\n                    break;\r\n                case 'radio':\r\n                case 'checkbox':\r\n                    document.forms[x].elements[y].checked = '';\r\n                    break;\r\n                case 'select-one':\r\n                    document.forms[x].elements[y].options[0].selected = true;\r\n                    break;\r\n                case 'select-multiple':\r\n                    for (z = 0; z < document.forms[x].elements[y].options.length; z++) {\r\n                        document.forms[x].elements[y].options[z].selected = false;\r\n                    }\r\n                    break;\r\n            } // end switch\r\n        } // end for y\r\n    } // end for x\r\n}","function sendForm(form) {\r\n    var reachgoal = form.dataset.reachgoal;\r\n\r\n    var formData = new FormData(form);\r\n\r\n    var formBtn = form.querySelector('button.Btn');\r\n    formBtn.classList.add('Btn_disabled');\r\n    formBtn.disabled = true;\r\n\r\n    var xhr = new XMLHttpRequest();\r\n    xhr.open(\"POST\", \"/ok.php\");\r\n    xhr.send(formData);\r\n    xhr.onreadystatechange = function() { // (3)\r\n        if (xhr.readyState != 4) return;\r\n\r\n        if (xhr.status != 200) {\r\n            alert(xhr.status + ': ' + xhr.statusText);\r\n        } else {\r\n            //yaCounter33093903.reachGoal(reachgoal);\r\n            parent.$.fancybox.close();\r\n            jQuery.fancybox.open( jQuery('.ImThanks').html(xhr.responseText), {\r\n                padding: 0,\r\n            });\r\n            //jQuery.fancybox( jQuery('.ImThanks').html(xhr.responseText) );\r\n\r\n            formBtn.classList.remove('Btn_disabled');\r\n            formBtn.disabled = false;\r\n            clearForms();\r\n        }\r\n\r\n    };\r\n    return false;\r\n}","'use strict';\r\n\r\n/**\r\n *\r\n * @param options\r\n formId: 'profile',\r\n formValidClass: 'form_valid',\r\n formInvalidClass: 'form_invalid',\r\n inputErrorClass: 'input_error'\r\n */\r\nfunction validateForm(options) {\r\n    var form = document.getElementById(options.formId);\r\n\r\n    if(!form) {\r\n        console.log(\"Cannot find form with id: \"+ options.formId);\r\n        return;\r\n    }\r\n\r\n    var funcHandler = options.funcHandler || sendForm;\r\n    var formValidClass = options.formValidClass || 'Form_valid';\r\n    var formInvalidClass = options.formInvalidClass || 'Form_invalid';\r\n    var inputErrorClass = options.inputErrorClass || 'Input_error';\r\n\r\n    function requiredValid(elem) {\r\n        if (elem.value == '' && elem.hasAttribute('data-required')) {\r\n            errorInput(elem);\r\n        }\r\n    }\r\n\r\n    function validElem(elem) {\r\n        var regExp;\r\n        var value = elem.value;\r\n\r\n        switch (elem.dataset.validator) {\r\n            case 'length':\r\n                value = value.length;\r\n                lenghtCheck(elem, value);\r\n\r\n                requiredValid(elem);\r\n\r\n                break;\r\n            case 'letters':\r\n                regExp = /^[^\\s]([a-zа-яё\\s\\-]*)$/i;\r\n                if (!regExp.test(value)) errorInput(elem);\r\n\r\n                requiredValid(elem);\r\n\r\n                break;\r\n            case 'number':\r\n                if (isNaN(Number(value))) {\r\n                    errorInput(elem);\r\n                    return;\r\n                }\r\n\r\n                value = parseInt(value);\r\n                lenghtCheck(elem, value);\r\n\r\n                requiredValid(elem);\r\n\r\n                break;\r\n            case 'regexp':\r\n                regExp = new RegExp(elem.dataset.validatorPattern);\r\n                if (!regExp.test(value) && value != '') errorInput(elem);\r\n\r\n                requiredValid(elem);\r\n\r\n                break;\r\n            case 'file':\r\n                if(elem.value === '') {\r\n                    if(!elem.parentNode.querySelector('.FileErrorText')) {\r\n                        var para = document.createElement('p');\r\n                        para.classList.add('FileErrorText');\r\n                        para.textContent = 'Нет прикрепленного файла';\r\n                        setTimeout(function () {\r\n                            elem.parentNode.removeChild(para);\r\n                        }, 1000);\r\n                        elem.parentNode.insertBefore(para, elem);\r\n                    }\r\n                }\r\n\r\n                requiredValid(elem);\r\n\r\n                break;\r\n            default:\r\n                requiredValid(elem);\r\n\r\n                break;\r\n        }\r\n    }\r\n\r\n    function lenghtCheck(elem, value) {\r\n        var min, max;\r\n        if (elem.dataset.validatorMin) {\r\n            min = parseInt(elem.dataset.validatorMin);\r\n        }\r\n        if (elem.dataset.validatorMax) {\r\n            max = parseInt(elem.dataset.validatorMax);\r\n        }\r\n\r\n        if (min > value || value > max) {\r\n            errorInput(elem);\r\n        }\r\n    }\r\n\r\n    function errorInput(elem) {\r\n        elem.classList.add(inputErrorClass);\r\n        setTimeout(function () {\r\n            elem.classList.remove(inputErrorClass);\r\n        }, 500)\r\n    }\r\n\r\n    function checkForm() {\r\n        try {\r\n            var inputList = form.querySelectorAll('input');\r\n\r\n            for (var i = 0; i < inputList.length; i++) {\r\n                validElem(inputList[i]);\r\n\r\n                if (inputList[i].classList.contains(inputErrorClass)) {\r\n                    form.classList.remove(formValidClass);\r\n                    form.classList.add(formInvalidClass);\r\n                    inputList[i].focus();\r\n                    return false;\r\n                }\r\n                form.classList.remove(formInvalidClass);\r\n                form.classList.add(formValidClass);\r\n            }\r\n            return true;\r\n        } catch (e) {\r\n            console.log(e);\r\n        }\r\n    }\r\n\r\n    form.addEventListener('blur', function (event) {\r\n        validElem(event.target);\r\n    }, true);\r\n\r\n    form.addEventListener('focus', function (event) {\r\n        if (event.target.classList.contains(inputErrorClass)) {\r\n            errorInput(elem);\r\n        }\r\n    }, true);\r\n\r\n    form.addEventListener('click', function (event) {\r\n        if (event.target.tagName === 'INPUT' && event.keyCode == 13) {\r\n            checkForm();\r\n        }\r\n    }, true);\r\n\r\n    form.addEventListener('submit', function (event) {\r\n        event.preventDefault();\r\n        if (checkForm()) funcHandler(form);\r\n    });\r\n}"]}